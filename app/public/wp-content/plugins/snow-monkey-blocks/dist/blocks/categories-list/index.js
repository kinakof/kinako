(()=>{var e={4184:(e,t)=>{var l;!function(){"use strict";var o={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var l=arguments[t];if(l){var a=typeof l;if("string"===a||"number"===a)e.push(l);else if(Array.isArray(l)){if(l.length){var s=n.apply(null,l);s&&e.push(s)}}else if("object"===a){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){e.push(l.toString());continue}for(var r in l)o.call(l,r)&&l[r]&&e.push(r)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(t,[]))||(e.exports=l)}()}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,l),a.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"name":"snow-monkey-blocks/categories-list","Y4":{"Dq":{"Z":5},"SW":{"Z":""},"W3":{"Z":""},"vm":{"Z":""}}}'),o=window.React,n=(0,o.createElement)("svg",{viewBox:"0 0 24 24"},(0,o.createElement)("path",{d:"M21.28,12.57H16.76a.19.19,0,0,1-.18-.19V10.73a.73.73,0,0,0-.72-.73H9.72a.73.73,0,0,0-.72.73v9.54a.73.73,0,0,0,.72.73H21.28a.73.73,0,0,0,.72-.73v-7A.72.72,0,0,0,21.28,12.57ZM21,19.62a.37.37,0,0,1-.37.38H10.37a.37.37,0,0,1-.37-.38V11.37a.37.37,0,0,1,.37-.37h4.76a.37.37,0,0,1,.37.37v1.88a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,21,14Z"}),(0,o.createElement)("path",{d:"M9,13H3.37A.37.37,0,0,1,3,12.62V4.37A.37.37,0,0,1,3.37,4H8.13a.37.37,0,0,1,.37.37V6.25a.36.36,0,0,0,.37.37h4.76A.37.37,0,0,1,14,7v3h1V6.3a.72.72,0,0,0-.72-.73H9.76a.19.19,0,0,1-.18-.19V3.73A.73.73,0,0,0,8.86,3H2.72A.73.73,0,0,0,2,3.73v9.54a.73.73,0,0,0,.72.73H9Z"}));var a=l(4184),s=l.n(a);const r=window.lodash,i=window.wp.components,c=window.wp.blockEditor,m=window.wp.data,u=window.wp.element,_=window.wp.i18n,d=(e,t=0,l=null)=>(e=Number(e),(isNaN(e)||e<t)&&(e=t),null!==l&&e>l&&(e=l),e),g=window.wp.dataControls,{name:p}=t,b={articleCategories:{}},y={setArticleCategories:e=>({type:"SET_ARTICLE_CATEGORIES",articleCategories:e}),*fetchArticleCategories(){const e=yield(0,g.apiFetch)({path:"/wp/v2/categories/?per_page=-1"});return y.setArticleCategories(e)}},k={*getArticleCategories(){yield y.fetchArticleCategories()}},w=(0,m.createReduxStore)(p,{reducer:(e=b,t)=>"SET_ARTICLE_CATEGORIES"===t.type?{...e,articleCategories:t.articleCategories}:e,actions:y,selectors:{getArticleCategories:e=>e.articleCategories},controls:g.controls,resolvers:k});(0,m.register)(w),(0,e.registerBlockType)(t.name,{icon:{foreground:"#cd162c",src:n},edit:function({attributes:e,setAttributes:l,className:n}){const{articles:a,exclusionCategories:g,orderby:p,order:b}=e,y=(0,u.useRef)(),k=(0,m.useSelect)((e=>e(w).getArticleCategories()));if(!k||!k.length)return(0,o.createElement)("div",{...(0,c.useBlockProps)()},(0,o.createElement)(i.Placeholder,{icon:"editor-ul",label:(0,_.__)("Categories list","snow-monkey-blocks")},(0,o.createElement)(i.Spinner,null),(0,_.__)("Loading setting data","snow-monkey-blocks")));const v=(e,t)=>{let l=[];return null!=g&&(l=g.split(",")),e?l.push(t):l=(0,r.remove)(l,(e=>t!==e)),(0,r.compact)((0,r.union)(l)).join(",")},E=s()("smb-categories-list",n);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(c.InspectorControls,null,(0,o.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Block settings","snow-monkey-blocks")},(0,o.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>a!==t.Y4.Dq.Z,isShownByDefault:!0,label:(0,_.__)("Categories list articles","snow-monkey-blocks"),onDeselect:()=>l({articles:t.Y4.Dq.Z})},(0,o.createElement)(i.RangeControl,{label:(0,_.__)("Categories list articles","snow-monkey-blocks"),value:a,onChange:e=>l({articles:d(e,1,5)}),min:"1",max:"5"}))),(0,o.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks")},(0,o.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>g!==t.Y4.SW.Z,isShownByDefault:!0,label:(0,_.__)("Exclusion categories settings","snow-monkey-blocks"),onDeselect:()=>l({exclusionCategories:t.Y4.SW.Z})},(0,o.createElement)("p",{style:{gridColumn:"1/-1"}},(0,_.__)("Categories with a post count of 0 are not displayed even if they are not excluded","snow-monkey-blocks")),(0,o.createElement)((()=>k.map((e=>(0,o.createElement)(i.ToggleControl,{key:e.id,label:e.name,value:String(e.id),checked:-1!==(0,r.indexOf)(g.split(","),String(e.id)),onChange:t=>{l({exclusionCategories:v(t,String(e.id))})}})))),null))),(0,o.createElement)(i.__experimentalToolsPanel,{label:(0,_.__)("Display order settings","snow-monkey-blocks")},(0,o.createElement)("p",{style:{gridColumn:"1/-1"}},(0,_.__)("The display order you set is valid only on the actual contribution screen","snow-monkey-blocks")),(0,o.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>p!==t.Y4.W3.Z,isShownByDefault:!0,label:(0,_.__)("orderby","snow-monkey-blocks"),onDeselect:()=>l({orderby:t.Y4.W3.Z})},(0,o.createElement)(i.SelectControl,{label:(0,_.__)("orderby","snow-monkey-blocks"),value:p,options:[{label:(0,_.__)("category id","snow-monkey-blocks"),value:"id"},{label:(0,_.__)("category name","snow-monkey-blocks"),value:"name"},{label:(0,_.__)("category slug","snow-monkey-blocks"),value:"slug"},{label:(0,_.__)("category post count","snow-monkey-blocks"),value:"count"},{label:(0,_.__)("term_group","snow-monkey-blocks"),value:"term_group"}],onChange:e=>l({orderby:e})})),(0,o.createElement)(i.__experimentalToolsPanelItem,{hasValue:()=>b!==t.Y4.vm.Z,isShownByDefault:!0,label:(0,_.__)("order","snow-monkey-blocks"),onDeselect:()=>l({order:t.Y4.vm.Z})},(0,o.createElement)(i.SelectControl,{label:(0,_.__)("order","snow-monkey-blocks"),value:b,options:[{label:(0,_.__)("asc","snow-monkey-blocks"),value:"asc"},{label:(0,_.__)("desc","snow-monkey-blocks"),value:"desc"}],onChange:e=>l({order:e})})))),(0,o.createElement)("div",{...(0,c.useBlockProps)()},(0,o.createElement)((()=>{const e=k.map((e=>e.count>0&&-1===(0,r.indexOf)(g.split(","),String(e.id))?(0,o.createElement)("li",{className:"smb-categories-list__item",key:e.id},(0,o.createElement)("div",{className:"smb-categories-list__item__count"},e.count,(0,o.createElement)("span",null,(0,_.__)("articles","snow-monkey-blocks"))),(0,o.createElement)("div",{className:"smb-categories-list__item__detail"},(0,o.createElement)("div",{className:"smb-categories-list__item__category-name"},e.name),e.description&&(0,o.createElement)("div",{className:"smb-categories-list__item__category-description"},e.description),(0,o.createElement)("div",{className:"smb-categories-list__item__recent-label"},(0,_.__)("Recent posts","snow-monkey-blocks")),(0,o.createElement)("ul",{className:"smb-categories-list__item__list"},(0,o.createElement)("li",null,(0,_.__)("Only the actual contribution screen is displayed","snow-monkey-blocks"))))):null)).filter((e=>e));return(0,o.createElement)("div",{className:E},(0,o.createElement)("ul",{className:"smb-categories-list__list",ref:y},e.filter((e=>e))))}),null)))},save:function(){return null}})})()})();