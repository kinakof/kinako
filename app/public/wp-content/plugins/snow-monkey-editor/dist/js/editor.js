(()=>{var e={184:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var a=r.apply(null,n);a&&e.push(a)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)o.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},685:e=>{"use strict";var t=function(e){return parseInt(e,16)};e.exports=function(e,n){var o,r,s=function(e){return"#"===e.charAt(0)?e.slice(1):e}(e),a=function(e){var n=e.g,o=e.b,r=e.a;return{r:t(e.r),g:t(n),b:t(o),a:+(t(r)/255).toFixed(2)}}({r:(r=3===(o=s).length||4===o.length)?"".concat(o.slice(0,1)).concat(o.slice(0,1)):o.slice(0,2),g:r?"".concat(o.slice(1,2)).concat(o.slice(1,2)):o.slice(2,4),b:r?"".concat(o.slice(2,3)).concat(o.slice(2,3)):o.slice(4,6),a:(r?"".concat(o.slice(3,4)).concat(o.slice(3,4)):o.slice(6,8))||"ff"});return function(e,t){var n,o=e.r,r=e.g,s=e.b,a=e.a,l=(n=t,!isNaN(parseFloat(n))&&isFinite(n)?t:a);return"rgba(".concat(o,", ").concat(r,", ").concat(s,", ").concat(l,")")}(a,n)}},306:e=>{e.exports=function(e){if("string"!=typeof e)throw new Error("color has to be type of `string`");if("#"===e.substr(0,1))return{hex:e,alpha:1};var t=e.replace(/\s+/g,""),n=/(.*?)rgb(a)??\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([01]|1.0*|0??\.([0-9]{0,})))??\)/.exec(t);if(!n)throw new Error("given color ("+e+") isn't a valid rgb or rgba color");var o=parseInt(n[3],10),r=parseInt(n[4],10),s=parseInt(n[5],10),a=n[6]?/([0-9\.]+)/.exec(n[6])[0]:"1",l=(s|r<<8|o<<16|1<<24).toString(16).slice(1);return"."===a.substr(0,1)&&(a=parseFloat("0"+a)),a=parseFloat(Math.round(100*a))/100,{hex:"#"+l.toString(16),alpha:a}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{settings:()=>_});var t={};n.r(t),n.d(t,{settings:()=>B});var o={};n.r(o),n.d(o,{settings:()=>I});var r={};n.r(r),n.d(r,{settings:()=>V});var s={};n.r(s),n.d(s,{settings:()=>W});var a={};n.r(a),n.d(a,{settings:()=>te});var l={};n.r(l),n.d(l,{settings:()=>ge});var i={};n.r(i),n.d(i,{settings:()=>be});const c=window.React,m=window.lodash,u=window.wp.blockEditor,g=window.wp.components,p=window.wp.richText,d=window.wp.i18n,h=(0,c.createElement)("svg",{role:"img",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},(0,c.createElement)("path",{d:"M13.982,16.711c-0.744,1.441 -2.248,2.428 -3.982,2.428c-1.735,0 -3.238,-0.986 -3.983,-2.428c0.909,-1.213 2.355,-2.002 3.983,-2.002c1.629,0 3.074,0.789 3.982,2.002Zm-0.748,-7.657c-0.314,2.56 1.248,2.919 1.248,5.603c0,0.467 -0.072,0.918 -0.205,1.344c-1.037,-1.203 -2.57,-1.967 -4.277,-1.967c-1.708,0 -3.24,0.764 -4.277,1.967c-0.133,-0.426 -0.205,-0.877 -0.205,-1.344c0,-2.684 1.563,-3.043 1.247,-5.603c-0.362,-2.928 -4.315,-2.465 -4.315,-5.334c0,-1.579 1.279,-2.858 2.858,-2.858c1.709,0 2.765,1.558 4.692,1.558c1.926,0 2.982,-1.558 4.691,-1.558c1.578,0 2.857,1.279 2.857,2.858c0.001,2.869 -3.952,2.406 -4.314,5.334Zm-4.677,-4.947l-0.708,0c0,0.498 -0.403,0.9 -0.901,0.9c-0.498,0 -0.901,-0.402 -0.901,-0.9l-0.708,0c0,0.889 0.72,1.609 1.609,1.609c0.889,0 1.609,-0.72 1.609,-1.609Zm0.979,7.141c0,-0.312 -0.253,-0.568 -0.566,-0.568c-0.313,0 -0.567,0.256 -0.567,0.568c0,0.312 0.254,0.566 0.567,0.566c0.313,0 0.566,-0.253 0.566,-0.566Zm2.062,0c0,-0.312 -0.254,-0.568 -0.568,-0.568c-0.312,0 -0.566,0.256 -0.566,0.568c0,0.312 0.254,0.566 0.566,0.566c0.314,0 0.568,-0.253 0.568,-0.566Zm3.062,-7.141l-0.707,0c0,0.498 -0.404,0.9 -0.9,0.9c-0.498,0 -0.902,-0.402 -0.902,-0.9l-0.707,0c0,0.889 0.721,1.609 1.609,1.609c0.886,0.001 1.607,-0.72 1.607,-1.609Z"})),b={position:"bottom left",variant:"alternate"};(0,p.registerFormatType)("snow-monkey-editor/dropdown",{title:"buttons",tagName:"sme-dropdown",className:null,edit:()=>(0,c.createElement)(u.BlockFormatControls,null,(0,c.createElement)("div",{className:"block-editor-format-toolbar"},(0,c.createElement)(g.ToolbarGroup,null,(0,c.createElement)(g.Slot,{name:"SnowMonkey.ToolbarControls"},(e=>0!==e.length&&(0,c.createElement)(g.ToolbarItem,null,(t=>(0,c.createElement)(g.DropdownMenu,{icon:h,label:(0,d.__)("Snow Monkey Editor Controls","snow-monkey-editor"),toggleProps:t,controls:(0,m.orderBy)(e.map((([{props:e}])=>e)),"title"),popoverProps:b}))))),["sme-font-size","sme-letter-spacing","sme-line-height","sme-text-color","sme-bg-color","sme-highlighter","sme-badge"].map((e=>(0,c.createElement)(g.Slot,{name:`SnowMonkey.ToolbarControls.${e}`,key:e}))))))});const v=e=>{if(!e)return;const{name:t,settings:n}=e;(0,p.registerFormatType)(t,n)},y=window.wp.data,k=window.wp.element,w=window.wp.keycodes;function C({name:e,shortcutType:t,shortcutCharacter:n,...o}){let r,s="SnowMonkey.ToolbarControls";return e&&(s+=`.${e}`),t&&n&&(r=w.displayShortcut[t](n)),(0,c.createElement)(g.Fill,{name:s},(0,c.createElement)(g.ToolbarButton,{...o,shortcut:r}))}const f=(0,d.__)("Remove formatting","snow-monkey-editor"),_={name:"snow-monkey-editor/remove-fomatting",title:f,tagName:"span",className:"sme-remove-fomatting",edit:({value:e,onChange:t})=>{const n=(0,y.useSelect)((e=>e("core/rich-text").getFormatTypes()),[]),o=(0,k.useCallback)((()=>{if(0<n.length){let o=e;n.forEach((e=>{o=(0,p.removeFormat)(o,e.name)})),t({...o})}}),[e,n]);return(0,c.createElement)(C,{icon:"editor-removeformatting",title:f,onClick:o})}};var E=n(184),S=n.n(E);const R=({name:e,value:t,onChange:n,onReset:o})=>{const r=(0,y.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["fontSizes"],[])})),s=(0,k.useMemo)((()=>function(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^font-size:\\s*"),"");const s=o.attributes.class;if(s){let e=s.replace(/.*has-([^\s]*)-font-size.*/,"$1"),t=(0,m.find)(n,{slug:e});if(!t&&(e=e.replace(/(\d)-([^\d])/,"$1$2",e),t=(0,m.find)(n,{slug:e}),!t))return;return t.size}}(e,t,r)),[e,t]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(u.FontSizePicker,{value:s,onChange:n,fontSizes:r,__nextHasNoMarginBottom:!0}),(0,c.createElement)(g.Button,{disabled:void 0===t,variant:"secondary",isSmall:!0,onClick:o},(0,d.__)("Reset")))},F=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,onReset:r,contentRef:s,settings:a})=>{const l=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:s.current,value:t,settings:a})),i=(0,k.useMemo)((()=>l.getBoundingClientRect()),[]);return l?.ownerDocument&&(l.getBoundingClientRect=()=>i),(0,c.createElement)(g.Popover,{anchor:l,onClose:o,className:"sme-popover sme-popover--inline-font-size components-inline-color-popover"},(0,c.createElement)("fieldset",null,(0,c.createElement)(R,{name:e,value:t,onChange:n,onReset:r})))})),x="snow-monkey-editor/font-size",A=(0,d.__)("Font size","snow-monkey-editor"),N=[],B={name:x,title:A,tagName:"span",className:"sme-font-size",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,a=(0,u.useSetting)("typography.fontSizes")||N,[l,i]=(0,k.useState)(!1);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-font-size":"sme-font-size-not-active",name:o?"sme-font-size":void 0,title:A,className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,c.createElement)(g.Icon,{icon:"editor-textcolor"})}),l&&(0,c.createElement)(F,{name:x,activeAttributes:r,value:t,onClose:()=>i(!1),onReset:()=>{i(!1),n((0,p.removeFormat)(t,x))},onChange:e=>{if(e){let o;if((0,m.isString)(e)||a[0]&&(0,m.isString)(a[0].size))o=e;else{if(!(0,m.isNumber)(e))return;o=`${e}px`}const r=(0,m.find)(a,{size:e});n((0,p.applyFormat)(t,{type:x,attributes:r?{class:(0,u.getFontSizeClass)(r.slug)}:{style:`font-size: ${o}`}}))}else n((0,p.removeFormat)(t,x))},contentRef:s,settings:B}))}},M=({name:e,title:t,value:n,onChange:o,onReset:r})=>{const s=(0,k.useMemo)((()=>function(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes?.style;return o?parseFloat(o.replace(new RegExp("^letter-spacing:\\s*"),"").replace("rem","")):void 0}(e,n)),[e,n]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(g.RangeControl,{label:t,value:s,onChange:o,min:"0",max:"2",step:"0.1",initialPosition:void 0}),(0,c.createElement)(g.Button,{disabled:void 0===n,variant:"secondary",isSmall:!0,onClick:r},(0,d.__)("Reset")))},O=(0,g.withSpokenMessages)((({name:e,title:t,value:n,onChange:o,onClose:r,onReset:s,contentRef:a,settings:l})=>{const i=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:a.current,value:n,settings:l})),m=(0,k.useMemo)((()=>i.getBoundingClientRect()),[]);return i?.ownerDocument&&(i.getBoundingClientRect=()=>m),(0,c.createElement)(g.Popover,{anchor:i,onClose:r,className:"sme-popover sme-popover--inline-letter-spacing components-inline-color-popover"},(0,c.createElement)("fieldset",null,(0,c.createElement)(M,{name:e,title:t,value:n,onChange:o,onReset:s})))})),P="snow-monkey-editor/letter-spacing",T=(0,d.__)("Letter spacing","snow-monkey-editor"),I={name:P,title:T,tagName:"span",className:"sme-letter-spacing",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a,l]=(0,k.useState)(!1);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-letter-spacing":"sme-letter-spacing-not-active",name:o?"sme-letter-spacing":void 0,title:T,className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{l(!a)},icon:(0,c.createElement)(g.Icon,{icon:"controls-pause"})}),a&&(0,c.createElement)(O,{name:P,title:T,activeAttributes:r,value:t,onClose:()=>{l(!1)},onReset:()=>{l(!1),n((0,p.removeFormat)(t,P))},onChange:e=>{n((0,p.applyFormat)(t,{type:P,attributes:{style:`letter-spacing: ${e}rem`}}))},contentRef:s,settings:I}))}},$=({name:e,title:t,value:n,onChange:o,onReset:r})=>{const s=(0,k.useMemo)((()=>function(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes.style;return o?parseFloat(o.replace(new RegExp("^line-height:\\s*"),"")):void 0}(e,n)),[e,n]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(g.RangeControl,{label:t,value:s,onChange:o,min:"0",max:"5",step:"0.1",initialPosition:void 0}),(0,c.createElement)(g.Button,{disabled:void 0===n,variant:"secondary",isSmall:!0,onClick:r},(0,d.__)("Reset")))},z=(0,g.withSpokenMessages)((({name:e,title:t,value:n,onChange:o,onClose:r,onReset:s,contentRef:a,settings:l})=>{const i=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:a.current,value:n,settings:l})),m=(0,k.useMemo)((()=>i.getBoundingClientRect()),[]);return i?.ownerDocument&&(i.getBoundingClientRect=()=>m),(0,c.createElement)(g.Popover,{anchor:i,onClose:r,className:"sme-popover sme-popover--inline-line-height components-inline-color-popover"},(0,c.createElement)("fieldset",null,(0,c.createElement)($,{name:e,title:t,value:n,onChange:o,onReset:s})))})),j="snow-monkey-editor/line-height",D=(0,d.__)("Line height","snow-monkey-editor"),V={name:j,title:D,tagName:"span",className:"sme-line-height",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,[a,l]=(0,k.useState)(!1);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-line-height":"sme-line-height-not-active",name:o?"sme-line-height":void 0,title:D,className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{l(!a)},icon:(0,c.createElement)(g.Icon,{icon:"editor-insertmore"})}),a&&(0,c.createElement)(z,{name:j,title:D,activeAttributes:r,value:t,onClose:()=>{l(!1)},onReset:()=>{l(!1),n((0,p.removeFormat)(t,j))},onChange:e=>{n((0,p.applyFormat)(t,{type:j,attributes:{style:`line-height: ${e}`}}))},contentRef:s,settings:V}))}};function G(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^color:\\s*"),"");const s=o.attributes.class;if(s){const e=s.replace(/.*has-([^\s]*)-color.*/,"$1");return(0,u.getColorObjectByAttributeValues)(n,e).color}}const H=({name:e,value:t,onChange:n})=>{const o=(0,y.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),r=(0,k.useMemo)((()=>G(e,t,o)),[e,t,o]);return(0,c.createElement)(u.__experimentalColorGradientControl,{label:(0,d.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,u.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},L=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:r.current,value:t,settings:s})),l=(0,k.useMemo)((()=>a.getBoundingClientRect()),[]);return a?.ownerDocument&&(a.getBoundingClientRect=()=>l),(0,c.createElement)(g.Popover,{anchor:a,value:t,onClose:o,className:"sme-popover sme-popover--inline-color components-inline-color-popover"},(0,c.createElement)(H,{name:e,value:t,onChange:n}))})),Z="snow-monkey-editor/text-color",q=(0,d.__)("Text color","snow-monkey-editor"),U=[],W={name:Z,title:q,tagName:"span",className:"sme-text-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,a=(0,u.useSetting)("color.palette")||U,[l,i]=(0,k.useState)(!1),m=(0,k.useMemo)((()=>G(Z,t,a)),[t,a]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-text-color":"sme-text-color-not-active",name:o?"sme-text-color":void 0,title:q,style:{color:m},className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,c.createElement)(g.Icon,{icon:"edit"})}),l&&(0,c.createElement)(L,{name:Z,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,u.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:Z,attributes:o?{class:(0,u.getColorClassName)("color",o.slug)}:{style:`color: ${e}`}}))}else n((0,p.removeFormat)(t,Z)),i(!1)},contentRef:s,settings:W}))}};function J(e,t,n){const o=(0,p.getActiveFormat)(t,e);if(!o)return;const r=o.attributes.style;if(r)return r.replace(new RegExp("^background-color:\\s*"),"");const s=o.attributes.class;if(s){const e=s.replace(/.*has-([^\s]*)-background-color.*/,"$1");return(0,u.getColorObjectByAttributeValues)(n,e).color}}const K=({name:e,value:t,onChange:n})=>{const o=(0,y.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),r=(0,k.useMemo)((()=>J(e,t,o)),[e,t,o]);return(0,c.createElement)(u.__experimentalColorGradientControl,{label:(0,d.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,u.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},Q=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:r.current,value:t,settings:s})),l=(0,k.useMemo)((()=>a.getBoundingClientRect()),[]);return a?.ownerDocument&&(a.getBoundingClientRect=()=>l),(0,c.createElement)(g.Popover,{anchor:a,onClose:o,className:"sme-popover sme-popover--inline-background-color components-inline-color-popover"},(0,c.createElement)(K,{name:e,value:t,onChange:n}))})),X="snow-monkey-editor/bg-color",Y=(0,d.__)("Background color","snow-monkey-editor"),ee=[],te={name:X,title:Y,tagName:"span",className:"sme-bg-color",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,a=(0,u.useSetting)("color.palette")||ee,[l,i]=(0,k.useState)(!1),m=(0,k.useMemo)((()=>J(X,t,a)),[t,a]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-bg-color":"sme-bg-color-not-active",name:o?"sme-bg-color":void 0,title:Y,style:{color:m},className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,c.createElement)(g.Icon,{icon:"tag"})}),l&&(0,c.createElement)(Q,{name:X,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,u.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:X,attributes:o?{class:(0,u.getColorClassName)("background-color",o.slug)}:{style:`background-color: ${e}`}}))}else n((0,p.removeFormat)(t,X)),i(!1)},contentRef:s,settings:te}))}};var ne=n(685),oe=n.n(ne),re=n(306),se=n.n(re);function ae(e,t){const n=(0,p.getActiveFormat)(t,e);if(!n)return;const o=n.attributes.style;if(!o)return;const r=o.match(/(#[0-9A-F]{3,6}) /i);if(r)return r;const s=o.match(/,\s*?(rgba?\([^)]+\)) /i);return s?function(e){if(!e||4===e.length)return e;const t=e.match(/^#([0-9A-F])\1([0-9A-F])\1([0-9A-F])\1$/i);return t?`#${t[1].slice(0,1)}${t[2].slice(0,1)}${t[3].slice(0,1)}`:e}(se()(s[1]).hex):void 0}const le=({name:e,value:t,onChange:n})=>{const o=(0,y.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,m.get)(t(),["colors"],[])})),r=(0,k.useMemo)((()=>ae(e,t)),[e,t,o]);return(0,c.createElement)(u.__experimentalColorGradientControl,{label:(0,d.__)("Color","snow-monkey-editor"),colorValue:r,onColorChange:n,...(0,u.__experimentalUseMultipleOriginColorsAndGradients)(),__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})},ie=(0,g.withSpokenMessages)((({name:e,value:t,onChange:n,onClose:o,contentRef:r,settings:s})=>{const a=(0,u.useCachedTruthy)((0,p.useAnchor)({editableContentElement:r.current,value:t,settings:s})),l=(0,k.useMemo)((()=>a.getBoundingClientRect()),[]);return a?.ownerDocument&&(a.getBoundingClientRect=()=>l),(0,c.createElement)(g.Popover,{anchor:a,onClose:o,className:"sme-popover sme-popover--inline-color components-inline-color-popover"},(0,c.createElement)(le,{name:e,value:t,onChange:n}))})),ce="snow-monkey-editor/highlighter",me=(0,d.__)("Highlighter","snow-monkey-editor"),ue=[],ge={name:ce,title:me,tagName:"span",className:"sme-highlighter",attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,a=(0,u.useSetting)("color.palette")||ue,[l,i]=(0,k.useState)(!1),m=(0,k.useMemo)((()=>ae(ce,t)),[t,a]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-highlighter":"sme-highlighter-not-active",name:o?"sme-highlighter":void 0,title:me,style:{color:m},className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,c.createElement)(g.Icon,{icon:"tag"})}),l&&(0,c.createElement)(ie,{name:ce,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{e?(e.match(/^#/)&&(e=oe()(e,.5)),n((0,p.applyFormat)(t,{type:ce,attributes:{style:`background-image: linear-gradient(transparent 60%, ${e} 60%)`}}))):(n((0,p.removeFormat)(t,ce)),i(!1))},contentRef:s,settings:ge}))}},pe="snow-monkey-editor/badge",de=(0,d.__)("Badge","snow-monkey-editor"),he=[],be={name:pe,title:de,tagName:"span",className:"sme-badge",attributes:{style:"style",class:"class"},edit:e=>{const{value:t,onChange:n,isActive:o,activeAttributes:r,contentRef:s}=e,a=(0,u.useSetting)("color.palette")||he,[l,i]=(0,k.useState)(!1),m=(0,k.useMemo)((()=>J(pe,t,a)),[t,a]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(C,{key:o?"sme-badge":"sme-badge-not-active",name:o?"sme-badge":void 0,title:de,style:{color:m},className:S()("sme-toolbar-button",{"is-pressed":!!o}),onClick:()=>{i(!l)},icon:(0,c.createElement)(g.Icon,{icon:"tag"})}),l&&(0,c.createElement)(Q,{name:pe,activeAttributes:r,value:t,onClose:()=>i(!1),onChange:e=>{if(e){const o=(0,u.getColorObjectByColorValue)(a,e);n((0,p.applyFormat)(t,{type:pe,attributes:o?{class:(0,u.getColorClassName)("background-color",o.slug)}:{style:`background-color: ${e}`}}))}else n((0,p.removeFormat)(t,pe)),i(!1)},contentRef:s,settings:be}))}};v(e),v(t),v(o),v(r),v(s),v(a),v(l),v(i);const ve=window.wp.blocks,ye=window.wp.hooks,ke=window.wp.compose,we={name:"sme-alert",label:(0,d.__)("Alert","snow-monkey-editor")},Ce=["core/group","core/paragraph"].map((e=>({name:e,settings:we}))),fe={name:"sme-alert-success",label:(0,d.__)("Alert (Success)","snow-monkey-editor")},_e=["core/group","core/paragraph"].map((e=>({name:e,settings:fe}))),Ee={name:"sme-alert-warning",label:(0,d.__)("Alert (Warning)","snow-monkey-editor")},Se=["core/group","core/paragraph"].map((e=>({name:e,settings:Ee}))),Re={name:"sme-alert-remark",label:(0,d.__)("Alert (Remarks)","snow-monkey-editor")},Fe=["core/group","core/paragraph"].map((e=>({name:e,settings:Re}))),xe={name:"sme-block-code-nowrap",label:(0,d.__)("No wrap","snow-monkey-editor")},Ae=["core/code"].map((e=>({name:e,settings:xe}))),Ne={name:"sme-block-code-wrap",label:(0,d.__)("Wrap","snow-monkey-editor")},Be=["core/code"].map((e=>({name:e,settings:Ne}))),Me={name:"sme-fluid-shape-1",label:(0,d.__)("Fluid Shape 1","snow-monkey-editor")},Oe=["core/image","core/media-text"].map((e=>({name:e,settings:Me}))),Pe={name:"sme-fluid-shape-2",label:(0,d.__)("Fluid Shape 2","snow-monkey-editor")},Te=["core/image","core/media-text"].map((e=>({name:e,settings:Pe}))),Ie={name:"sme-fluid-shape-3",label:(0,d.__)("Fluid Shape 3","snow-monkey-editor")},$e=["core/image","core/media-text"].map((e=>({name:e,settings:Ie}))),ze={name:"sme-list-arrow",label:(0,d.__)("Arrow","snow-monkey-editor")},je=["core/list"].map((e=>({name:e,settings:ze}))),De={name:"sme-list-check",label:(0,d.__)("Check","snow-monkey-editor")},Ve=["core/list"].map((e=>({name:e,settings:De}))),Ge={name:"sme-list-remark",label:(0,d.__)("Remarks","snow-monkey-editor")},He=["core/list"].map((e=>({name:e,settings:Ge}))),Le={name:"sme-list-times",label:(0,d.__)("Times","snow-monkey-editor")},Ze=["core/list"].map((e=>({name:e,settings:Le}))),qe={name:"sme-ordered-list-circle",label:(0,d.__)("Ordered list (Circle)","snow-monkey-editor")},Ue=["core/list"].map((e=>({name:e,settings:qe}))),We={name:"sme-ordered-list-square",label:(0,d.__)("Ordered list (Square)","snow-monkey-editor")},Je=["core/list"].map((e=>({name:e,settings:We}))),Ke={name:"sme-post-it",label:(0,d.__)("Post-it","snow-monkey-editor")},Qe=["core/paragraph"].map((e=>({name:e,settings:Ke}))),Xe={name:"sme-post-it-narrow",label:(0,d.__)("Post-it (Narrow)","snow-monkey-editor")},Ye=["core/paragraph"].map((e=>({name:e,settings:Xe}))),et={name:"sme-shadowed",label:(0,d.__)("Shadowed","snow-monkey-editor")},tt=["core/image","core/button"].map((e=>({name:e,settings:et}))),nt={name:"sme-speech",label:(0,d.__)("Speech (Bottom)","snow-monkey-editor")},ot=["core/paragraph"].map((e=>({name:e,settings:nt}))),rt={name:"sme-speech-top",label:(0,d.__)("Speech (Top)","snow-monkey-editor")},st=["core/paragraph"].map((e=>({name:e,settings:rt}))),at={name:"sme-speech-right",label:(0,d.__)("Speech (Right)","snow-monkey-editor")},lt=["core/paragraph"].map((e=>({name:e,settings:at}))),it={name:"sme-speech-left",label:(0,d.__)("Speech (Left)","snow-monkey-editor")};[Ce,_e,Se,Fe,Ae,Be,Oe,Te,$e,je,Ve,He,Ze,Ue,Je,Qe,Ye,tt,ot,st,lt,["core/paragraph"].map((e=>({name:e,settings:it})))].forEach((e=>{e.forEach((e=>(e=>{if(!e)return;const{name:t,settings:n}=e;(0,ve.registerBlockStyle)(t,n)})(e)))})),(0,ye.addFilter)("editor.BlockEdit","snow-monkey-editor/ordered-list/block-edit",(0,ke.createHigherOrderComponent)((e=>t=>{const{attributes:n,name:o,clientId:r}=t,{start:s,reversed:a,ordered:l}=n;if("core/list"!==o)return(0,c.createElement)(e,{...t});const i=document.querySelector(`[data-block="${r}"].rich-text`);return i?i.classList.contains("is-style-sme-ordered-list-square")||i.classList.contains("is-style-sme-ordered-list-circle")?(i.style.counterReset=l?a?`sme-count ${s+1}`:"sme-count "+(s-1):"",(0,c.createElement)(e,{...t})):(i.style.counterReset="",(0,c.createElement)(e,{...t})):(0,c.createElement)(e,{...t})}),"withSnowMonkeyEditorOrderdListBlockEdit"));const ct=window.wp.preferences;const mt="snow-monkey-editor/preferences",ut=["allowedBlocks","content","templateLock","placeholder"],gt=e=>!(({name:e}={})=>!(0,ve.hasBlockSupport)(e,"snowmonkeyeditor.blockPresets"))(e)&&(!!function(e,t){if(!e||!Object.keys(e).length)return!1;const n=function(e){return(0,ye.applyFilters)("SnowMonkeyEditor.extension.allowedRoles",["administrator","editor","author","contributor"],e)}(t);return 0<e.roles.filter((e=>-1<n.indexOf(e))).length}(snowmonkeyeditor?.currentUser,"block-presets")&&!!(0,ve.getBlockType)(e.name)),pt=(0,ke.createHigherOrderComponent)((e=>((0,y.dispatch)(ct.store).setDefaults(mt,{blockPresets:{}}),t=>{if(!gt(t))return(0,c.createElement)(e,{...t});const{name:n,attributes:o,setAttributes:r}=t,[s,a]=(0,k.useState)(void 0),[l,i]=(0,k.useState)(0),m=(0,y.useSelect)((e=>e(ct.store).get(mt,"blockPresets")),[]),p=m?.[n],h=(0,ve.getBlockSupport)(n,"snowmonkeyeditor.blockPresets"),b=h?.ignore||[],v=({blockName:e,presetName:t,preset:n})=>(0,c.createElement)("div",{className:"sme-editor-block-presets__preset"},(0,c.createElement)(g.Button,{onClick:()=>{const t=(0,ve.getBlockType)(e),o={};Object.keys(t.attributes).forEach((e=>{o[e]=void 0})),ut.forEach((e=>{delete o[e],delete n[e]})),b.forEach((e=>{delete o[e],delete n[e]})),r({...o,...n})},variant:"secondary"},t),(0,c.createElement)(g.Button,{label:(0,d.__)("Remove this preset","snow-monkey-editor"),onClick:()=>{const n={...m};delete n?.[e]?.[t],(0,y.dispatch)(ct.store).set(mt,"blockPresets",n),i(l+1)},variant:"tertiary"},"x"));return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(e,{...t}),(0,c.createElement)(u.InspectorControls,null,(0,c.createElement)(g.PanelBody,{title:(0,d.__)("Presets","snow-monkey-editor")},!!p&&!!Object.values(p)&&(0,c.createElement)("div",{className:"sme-editor-block-presets"},Object.values(p).map(((e,t)=>{const o=Object.keys(p)[t];return(0,c.createElement)(v,{blockName:n,presetName:o,preset:e,key:t})}))),(0,c.createElement)("div",{className:"sme-editor-block-presets-inserter"},(0,c.createElement)("h3",{className:"sme-editor-block-presets-inserter__title"},(0,d.__)("Save current settings as a preset","snow-monkey-editor")),(0,c.createElement)("div",{className:"sme-editor-block-presets-inserter__control"},(0,c.createElement)(g.TextControl,{value:s||"",placeholder:(0,d.__)("Input the preset name.","snow-monkey-editor"),onChange:e=>a(e)}),(0,c.createElement)(g.Button,{variant:"primary",disabled:!s,onClick:async()=>{const e={...o};ut.forEach((t=>{delete e[t]})),b.forEach((t=>{delete e[t]}));const t={...m,[n]:{...p,[s]:{...e}}};(0,y.dispatch)(ct.store).set(mt,"blockPresets",t),a(void 0)}},(0,d.__)("Save","snow-monkey-editor")))))))})),"withInspectorControl");(0,ye.addFilter)("editor.BlockEdit","snow-monkey-editor/block-presets/with-inspector-controls",pt,100),(0,ye.addFilter)("blocks.registerBlockType","snow-monkey-editor/block-presets/support",((e,t)=>{let n=!1;return"core/button"===t?n={ignore:["url","title","text","linkTarget","rel"]}:"core/cover"===t?n={ignore:["url"]}:"core/list"===t?n={ignore:["values"]}:"core/paragraph"!==t&&"core/group"!==t&&"core/columns"!==t&&"core/column"!==t&&"core/heading"!==t||(n=!0),!1===n?e:{...e,supports:{...e.supports,snowmonkeyeditor:{blockPresets:n}}}}))})()})();